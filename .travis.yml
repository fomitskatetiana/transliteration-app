language: java
jdk:
  oraclejdk8
services:
- docker
before_install:
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
script:
- eval $(aws ecr get-login --region us-east-2)
- docker-compose build
- docker tag transliteration-app:latest 1996597326211.dkr.ecr.us-east-2.amazonaws.com/transliteration-app:latest
- docker push 996597326211.dkr.ecr.us-east-2.amazonaws.com/transliteration-app:latest
cache:
  directories:
  - $HOME/.m2
notifications:
  email:
    on_success: change
    on_failure: always
